function Canvas(n){var t,e,i,u,r=this,a=1,o=n,c=null;r.isVisible=function(){return o.is(":visible")},r.resize=function(){u=o[0].width=o.width()*a,c=o[0].height=o.height()*a},r.width=function(){return u},r.height=function(n){return n&&(o.height(n),r.resize()),c},r.clear=function(){i.clearRect(0,0,u,c)};var l=function(n){if(0==n.swidth||0==n.dwidth||0==n.sheight||0==n.dheight)return!1;return n.sx<0&&(n.dx-=n.sx,n.sx=0),n.swidth>n.image.naturalWidth-n.sx&&(n.swidth=n.image.naturalWidth-n.sx,n.dwidth=n.swidth),!0};r.drawImage=function(n){return l(n)?(n.sx||n.sy||n.swidth||n.sheight?i.drawImage(n.image,n.sx,n.sy,n.swidth,n.sheight,n.dx,n.dy,n.dwidth,n.dheight):n.dx||n.dy||n.dwidth||n.dheight?i.drawImage(n.image,n.dx,n.dy,n.dwidth,n.dheight):i.drawImage(n.image,n.dx,n.dy),!0):!1};var h=function(){i=o[0].getContext("2d"),t=window.devicePixelRatio||1,e=i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1,"undefined"==typeof auto&&(auto=!0),auto&&t!==e&&(a=t/e,i.scale(a,a)),delete h};h()}function ImageRepo(){var n=this,t=window.devicePixelRatio||1,e={};n.pixels=function(n){return n*t},n.fromUrl=function(n,i,u,r){var a=1==t?n:i,o=1==t?u:r,c=e[a];if(c)return c;var l=(new Date).getTime(),h=new Image;return h.src=a,e[a]=h,o&&h.load(function(){bpms=o/((new Date).getTime()-l)}),h},n.loaded=function(n,t){n.complete?t():n.onload=t}}function Menu(n){var t=this;t.initialWidth=n;var e=t.initialWidth;t.left=function(n){return(n-t.width())/2},t.width=function(n){return n?void(e=n):e},t.slices=[],t.selectNone=function(){for(var n in t.slices)t.slices[n].selected=!1}}function Slice(n,t,e){var i=this,u=n,r=1/6;i.id=t,i.selected=!1,i.select=function(){n.selectNone(),i.selected=!0},i.heroUrls=e;var a=e.heroThumbOffset||0,o=e.heroOffCenter||50;i.heroThumbTransitionPercent=0,i.heroOffset=function(n){return a*(i.heroThumbTransitionPercent/100)+(o-50)/100*-1*n*((100-i.heroThumbTransitionPercent)/100)},i.fractionWidth=function(n){return void 0===n?r:void(r=n)},i.pixelWidth=function(){return u.width()*r};var c=function(){n.slices.push(i),delete c};c()}function Tween(n,t,e,i,u,r){var a=this;a.running=!1;var o=function(){return(new Date).getTime()};a.run=function(){var c=Math.abs(e-t)/i*1e3,l=o();a.running=!0;var h=function(){var i=o();i>=l+c?(a.running=!1,n(e),u&&u()):n(Easie[r||"quadOut"](i-l,t,e-t,c)),a.running&&requestAnimationFrame(h)};requestAnimationFrame(h)},a.stop=function(){a.running=!1}}function HeroCanvas(n,t,e){var i,u,r,a,o,c=this,l=null;c.resizeCanvas=function(){r.resize(),l.expanded&&l.width(r.width()),s()};var h=function(n,t,e,i,u){for(var a=0;t>=a;a+=i-10)r.drawImage({image:n,sx:6*i+5,sy:0,swidth:i-10,sheight:u,dx:a,dy:0,dwidth:i-10,dheight:64*u/50})},s=function(){if(r.isVisible()){r.clear();var n=0,t=r.width(),e=r.height();i||M();var u=i.naturalWidth/7,a=i.naturalHeight;i.complete&&h(i,t,e,u,a);var o=0;for(var c in l.slices){var s=l.slices[c],f=s.pixelWidth();s.selected&&r.isVisible()&&!s.hero&&d(s);var w=s.selected?s.hero:i,I=l.left(t)+o;o+=f;var v=w.naturalHeight,g=s.selected?v:a,O=s.selected?(s.hero.naturalWidth-f)/2+s.heroOffset(t):u*n+(u-f)/2,p=f,b=p,x=v;r.drawImage({image:w,sx:O,sy:0,swidth:p,sheight:g,dx:I,dy:0,dwidth:b,dheight:x}),n++}}};c.collapseMenu=function(n,t){l.expanded=!1,a&&a.stop(),o=new Tween(function(n){l.width(n),s()},l.width(),l.initialWidth,2500,t),o.run()},c.expandMenu=function(n,t){return l.expanded=!0,o&&o.stop(),n?void l.width(r.width()):(a=new Tween(function(n){l.width(n),s()},l.width(),r.width(),2500,t),void a.run())};var f=function(n){var t={};for(var e in n)t[e]=l.slices[e].fractionWidth();return t};c.deselect=function(n,t){if(somethingSelected=!1,n){for(var e in l.slices)l.slices[e].fractionWidth(1/6);return r.height(500),t(),void l.selectNone()}var i=f(l.slices);tween=new Tween(function(n){r.height(n),s()},640,500,200,function(){tween=new Tween(function(n){for(var t in l.slices){var e=l.slices[t];e.heroThumbTransitionPercent=n;var u=i[t];e.fractionWidth(u+(1/6-u)*(n/100))}s()},0,100,200,function(){l.selectNone(),t()}),tween.run()}),tween.run()};var d=function(n){n.hero=u.fromUrl(n.heroUrls.hero,n.heroUrls.heroRetina)},w=function(n,t){for(var e in l.slices){var i=l.slices[e];i.fractionWidth(i===n?1:0)}r.height(640),s(),t()};c.select=function(n,t,e){l.expanded||c.expandMenu(t),somethingSelected=!0;var i=l.slices[n];return r.isVisible()?(d(i),void u.loaded(i.hero,function(){i.select();var n=f(l.slices);return t?void w(i,e):(tween=new Tween(function(t){for(var e in l.slices){var u=l.slices[e];u.heroThumbTransitionPercent=t;var r=n[e];u.fractionWidth(u===i?r+(1-r)*(100-t)/100:t*r/100)}s()},100,0,200,function(){r.height()<u.pixels(640)?(tween=new Tween(function(n){r.height(n),s()},500,640,200,e()),tween.run()):e()}),void tween.run())})):(i.select(),void w(i,e))};var M=function(){i=u.fromUrl(t.sprite,t.spriteRetina),u.loaded(i,function(){s()})},I=function(){u=new ImageRepo,l=new Menu(u.pixels(500));for(var t=0;6>t;t++)new Slice(l,t,e[t]);r=new Canvas(n,l),c.resizeCanvas(),delete I};I()}(function(){this.Easie=function(){function n(){}return n.linear=function(n,t,e,i){return t+e*n/i},n.backIn=function(n,t,e,i,u){return null==u&&(u=1.70158),e*(n/=i)*n*((u+1)*n-u)+t},n.backOut=function(n,t,e,i,u){return null==u&&(u=1.70158),e*((n=n/i-1)*n*((u+1)*n+u)+1)+t},n.backInOut=function(n,t,e,i,u){return null==u&&(u=1.70158),(n/=i/2)<1?e/2*n*n*(((u*=1.525)+1)*n-u)+t:e/2*((n-=2)*n*(((u*=1.525)+1)*n+u)+2)+t},n.bounceOut=function(n,t,e,i){return(n/=i)<1/2.75?7.5625*e*n*n+t:2/2.75>n?e*(7.5625*(n-=1.5/2.75)*n+.75)+t:2.5/2.75>n?e*(7.5625*(n-=2.25/2.75)*n+.9375)+t:e*(7.5625*(n-=2.625/2.75)*n+.984375)+t},n.bounceIn=function(t,e,i,u){return i-n.bounceOut(u-t,0,i,u)+e},n.bounceInOut=function(t,e,i,u){return u/2>t?.5*n.bounceIn(2*t,0,i,u)+e:.5*n.bounceOut(2*t-u,0,i,u)+.5*i+e},n.circIn=function(n,t,e,i){return-e*(Math.sqrt(1-(n/=i)*n)-1)+t},n.circOut=function(n,t,e,i){return e*Math.sqrt(1-(n=n/i-1)*n)+t},n.circInOut=function(n,t,e,i){return(n/=i/2)<1?-e/2*(Math.sqrt(1-n*n)-1)+t:e/2*(Math.sqrt(1-(n-=2)*n)+1)+t},n.cubicIn=function(n,t,e,i){return e*(n/=i)*n*n+t},n.cubicOut=function(n,t,e,i){return e*((n=n/i-1)*n*n+1)+t},n.cubicInOut=function(n,t,e,i){return(n/=i/2)<1?e/2*n*n*n+t:e/2*((n-=2)*n*n+2)+t},n.elasticOut=function(n,t,e,i,u,r){var a;return null==u&&(u=null),null==r&&(r=null),0===n?t:1===(n/=i)?t+e:(null==r&&(r=.3*i),null==u||u<Math.abs(e)?(u=e,a=r/4):a=r/(2*Math.PI)*Math.asin(e/u),u*Math.pow(2,-10*n)*Math.sin(2*(n*i-a)*Math.PI/r)+e+t)},n.elasticIn=function(n,t,e,i,u,r){var a;return null==u&&(u=null),null==r&&(r=null),0===n?t:1===(n/=i)?t+e:(null==r&&(r=.3*i),null==u||u<Math.abs(e)?(u=e,a=r/4):a=r/(2*Math.PI)*Math.asin(e/u),n-=1,-(u*Math.pow(2,10*n))*Math.sin(2*(n*i-a)*Math.PI/r)+t)},n.elasticInOut=function(n,t,e,i,u,r){var a;return null==u&&(u=null),null==r&&(r=null),0===n?t:2===(n/=i/2)?t+e:(null==r&&(r=.3*i*1.5),null==u||u<Math.abs(e)?(u=e,a=r/4):a=r/(2*Math.PI)*Math.asin(e/u),1>n?-.5*u*Math.pow(2,10*(n-=1))*Math.sin((n*i-a)*(2*Math.PI/r))+t:u*Math.pow(2,-10*(n-=1))*Math.sin(2*(n*i-a)*Math.PI/r)+e+t)},n.expoIn=function(n,t,e,i){return 0===n?t:e*Math.pow(2,10*(n/i-1))+t},n.expoOut=function(n,t,e,i){return n===i?t+e:e*(-Math.pow(2,-10*n/i)+1)+t},n.expoInOut=function(n,t,e,i){return 0===n?t:n===i?t+e:(n/=i/2)<1?e/2*Math.pow(2,10*(n-1))+t:e/2*(-Math.pow(2,-10*(n-1))+2)+t},n.linearNone=function(n,t,e,i){return e*n/i+t},n.linearIn=function(t,e,i,u){return n.linearNone(t,e,i,u)},n.linearOut=function(t,e,i,u){return n.linearNone(t,e,i,u)},n.linearInOut=function(t,e,i,u){return n.linearNone(t,e,i,u)},n.quadIn=function(n,t,e,i){return e*(n/=i)*n+t},n.quadOut=function(n,t,e,i){return-e*(n/=i)*(n-2)+t},n.quadInOut=function(n,t,e,i){return(n/=i/2)<1?e/2*n*n+t:-e/2*((n-=1)*(n-2)-1)+t},n.quartIn=function(n,t,e,i){return e*(n/=i)*n*n*n+t},n.quartOut=function(n,t,e,i){return-e*((n=n/i-1)*n*n*n-1)+t},n.quartInOut=function(n,t,e,i){return(n/=i/2)<1?e/2*n*n*n*n+t:-e/2*((n-=2)*n*n*n-2)+t},n.quintIn=function(n,t,e,i){return e*(n/=i)*n*n*n*n+t},n.quintOut=function(n,t,e,i){return e*((n=n/i-1)*n*n*n*n+1)+t},n.quintInOut=function(n,t,e,i){return(n/=i/2)<1?e/2*n*n*n*n*n+t:e/2*((n-=2)*n*n*n*n+2)+t},n.sineIn=function(n,t,e,i){return-e*Math.cos(n/i*(Math.PI/2))+e+t},n.sineOut=function(n,t,e,i){return e*Math.sin(n/i*(Math.PI/2))+t},n.sineInOut=function(n,t,e,i){return-e/2*(Math.cos(Math.PI*n/i)-1)+t},n}()}).call(this),function(){this.Easie=function(){function n(){}return n.linear=function(n,t,e,i){return t+e*n/i},n.backIn=function(n,t,e,i,u){return null==u&&(u=1.70158),e*(n/=i)*n*((u+1)*n-u)+t},n.backOut=function(n,t,e,i,u){return null==u&&(u=1.70158),e*((n=n/i-1)*n*((u+1)*n+u)+1)+t},n.backInOut=function(n,t,e,i,u){return null==u&&(u=1.70158),(n/=i/2)<1?e/2*n*n*(((u*=1.525)+1)*n-u)+t:e/2*((n-=2)*n*(((u*=1.525)+1)*n+u)+2)+t},n.bounceOut=function(n,t,e,i){return(n/=i)<1/2.75?7.5625*e*n*n+t:2/2.75>n?e*(7.5625*(n-=1.5/2.75)*n+.75)+t:2.5/2.75>n?e*(7.5625*(n-=2.25/2.75)*n+.9375)+t:e*(7.5625*(n-=2.625/2.75)*n+.984375)+t},n.bounceIn=function(t,e,i,u){return i-n.bounceOut(u-t,0,i,u)+e},n.bounceInOut=function(t,e,i,u){return u/2>t?.5*n.bounceIn(2*t,0,i,u)+e:.5*n.bounceOut(2*t-u,0,i,u)+.5*i+e},n.circIn=function(n,t,e,i){return-e*(Math.sqrt(1-(n/=i)*n)-1)+t},n.circOut=function(n,t,e,i){return e*Math.sqrt(1-(n=n/i-1)*n)+t},n.circInOut=function(n,t,e,i){return(n/=i/2)<1?-e/2*(Math.sqrt(1-n*n)-1)+t:e/2*(Math.sqrt(1-(n-=2)*n)+1)+t},n.cubicIn=function(n,t,e,i){return e*(n/=i)*n*n+t},n.cubicOut=function(n,t,e,i){return e*((n=n/i-1)*n*n+1)+t},n.cubicInOut=function(n,t,e,i){return(n/=i/2)<1?e/2*n*n*n+t:e/2*((n-=2)*n*n+2)+t},n.elasticOut=function(n,t,e,i,u,r){var a;return null==u&&(u=null),null==r&&(r=null),0===n?t:1===(n/=i)?t+e:(null==r&&(r=.3*i),null==u||u<Math.abs(e)?(u=e,a=r/4):a=r/(2*Math.PI)*Math.asin(e/u),u*Math.pow(2,-10*n)*Math.sin(2*(n*i-a)*Math.PI/r)+e+t)},n.elasticIn=function(n,t,e,i,u,r){var a;return null==u&&(u=null),null==r&&(r=null),0===n?t:1===(n/=i)?t+e:(null==r&&(r=.3*i),null==u||u<Math.abs(e)?(u=e,a=r/4):a=r/(2*Math.PI)*Math.asin(e/u),n-=1,-(u*Math.pow(2,10*n))*Math.sin(2*(n*i-a)*Math.PI/r)+t)},n.elasticInOut=function(n,t,e,i,u,r){var a;return null==u&&(u=null),null==r&&(r=null),0===n?t:2===(n/=i/2)?t+e:(null==r&&(r=.3*i*1.5),null==u||u<Math.abs(e)?(u=e,a=r/4):a=r/(2*Math.PI)*Math.asin(e/u),1>n?-.5*u*Math.pow(2,10*(n-=1))*Math.sin((n*i-a)*(2*Math.PI/r))+t:u*Math.pow(2,-10*(n-=1))*Math.sin(2*(n*i-a)*Math.PI/r)+e+t)},n.expoIn=function(n,t,e,i){return 0===n?t:e*Math.pow(2,10*(n/i-1))+t},n.expoOut=function(n,t,e,i){return n===i?t+e:e*(-Math.pow(2,-10*n/i)+1)+t},n.expoInOut=function(n,t,e,i){return 0===n?t:n===i?t+e:(n/=i/2)<1?e/2*Math.pow(2,10*(n-1))+t:e/2*(-Math.pow(2,-10*(n-1))+2)+t},n.linearNone=function(n,t,e,i){return e*n/i+t},n.linearIn=function(t,e,i,u){return n.linearNone(t,e,i,u)},n.linearOut=function(t,e,i,u){return n.linearNone(t,e,i,u)},n.linearInOut=function(t,e,i,u){return n.linearNone(t,e,i,u)},n.quadIn=function(n,t,e,i){return e*(n/=i)*n+t},n.quadOut=function(n,t,e,i){return-e*(n/=i)*(n-2)+t},n.quadInOut=function(n,t,e,i){return(n/=i/2)<1?e/2*n*n+t:-e/2*((n-=1)*(n-2)-1)+t},n.quartIn=function(n,t,e,i){return e*(n/=i)*n*n*n+t},n.quartOut=function(n,t,e,i){return-e*((n=n/i-1)*n*n*n-1)+t},n.quartInOut=function(n,t,e,i){return(n/=i/2)<1?e/2*n*n*n*n+t:-e/2*((n-=2)*n*n*n-2)+t},n.quintIn=function(n,t,e,i){return e*(n/=i)*n*n*n*n+t},n.quintOut=function(n,t,e,i){return e*((n=n/i-1)*n*n*n*n+1)+t},n.quintInOut=function(n,t,e,i){return(n/=i/2)<1?e/2*n*n*n*n*n+t:e/2*((n-=2)*n*n*n*n+2)+t},n.sineIn=function(n,t,e,i){return-e*Math.cos(n/i*(Math.PI/2))+e+t},n.sineOut=function(n,t,e,i){return e*Math.sin(n/i*(Math.PI/2))+t},n.sineInOut=function(n,t,e,i){return-e/2*(Math.cos(Math.PI*n/i)-1)+t},n}()}.call(this);