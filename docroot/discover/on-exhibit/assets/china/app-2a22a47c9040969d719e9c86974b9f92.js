$(function(){for(var n in svgManifest)$.ajax({url:svgManifest[n],complete:function(n){$(".svgHideContainer").append(n.responseText)}})}),$(function(){$(".moduleContainer").data("header-buffer",-1*$(".stickyHeader").outerHeight())}),window.common=window.common||{},window.common.anchorScrollGraceful={},$(function(){$("a[href*=#]").click(function(n){n.preventDefault();var e=$(this.hash),o=e.data("header-buffer")||0,t=e.data("graceful-scroll-duration")||500;return e.length?(window.common.anchorScrollGraceful.scrolling=!0,$("html,body").animate({scrollTop:e.offset().top+o},{duration:t,easing:"easeInOutExpo",done:function(){window.common.anchorScrollGraceful.scrolling=!1}}),!1):void 0})}),window.common=window.common||{},window.common.analytics=window.common.analytics||{},window.common.analytics.buyTicketsButtonClick=function(n,e){var o=$(n).attr("href");window.common.analytics.event("ticketing","ticketing-exhibition-microsite-"+e,o)},window.common.analytics.scrollDownButtonClick=function(){window.common.analytics.event("one-page","scroll-down-button-click")},window.common.analytics.sponsorLogoClick=function(n){window.common.analytics.event("one-page","logo-click",n)},window.common.analytics.headerNavClick=function(n){var e=$(n).text();window.common.analytics.event("one-page","header-nav-click",e)},window.common.analytics.jumpNavClick=function(n){var e=$.trim($(n).text());window.common.analytics.event("one-page","jump-nav-click",e)},window.common.analytics.visitClick=function(n){var e=$.trim($(n).text());window.common.analytics.event("one-page","visit-click",e)},window.common.analytics.footerClick=function(n,e){var o=e||$.trim($(n).text());window.common.analytics.event("one-page","footer-click",o)},window.common.analytics.trayClick=function(n,e,o){var t=e||$.trim($(n).text());window.common.analytics.event("one-page","tray-click"+(o?o:""),t)},window.common.analytics.introFMLogoClick=function(){window.common.analytics.event("one-page","intro-fm-logo-click")},window.common.analytics.audioEvent=function(n,e){window.common.analytics.event("one-page",n,e)},window.common.analytics.event=function(n,e,o,t){ga("send","event",n,e,o,t?{nonInteraction:1}:null)},window.common.analytics.changePage=function(){ga("set","page",window.location.pathname+window.location.hash),ga("send","pageview")},function(){window.common=window.common||{},window.common.viewport={};var n={},e=function(n,e){e=e||$(n);var o=e.offset().top,t=e.outerHeight();return{selector:n,$:e,top:o,bottom:o+t,height:t}};window.common.viewport.track=function(o){n[o]||(n[o]=e(o))};var o=document,t=$(window).height();$(window).resize(function(){$.each(n,function(o,t){n[o]=e(o,t.$)}),t=$(window).height()}),window.common.viewport.setScrollingElement=function(n){o=n},window.common.viewport.isIn=function(i,a,c){c||common.viewport.track(i),a=isNaN(a)?$(o).scrollTop():a;var r=n[r]||e(i);return a+t>r.top&&r.bottom>a},window.common.viewport.fills=function(i,a,c){c||common.viewport.track(i),a=isNaN(a)?$(o).scrollTop():a;var r=n[r]||e(i);return a>r.top&&r.bottom>a+t}}(),function(){function n(n){e.push(n)}var e=[];window.common.onScroll=n,$(function(){var n=$(document),o=n.scrollTop();$(document).scroll(function(){var t=n.scrollTop(),i=t>o;for(var a in e)e[a](i,t,o);o=t})})}(),function(){var n={},e={},o={},t={},i={},a={};window.common.viewport.onEnter=function(e,t){n[e]=window.common.viewport.isIn(e),o[e]=o[e]||[],o[e].push(t)},window.common.viewport.onExit=function(e,o){n[e]=window.common.viewport.isIn(e),t[e]=t[e]||[],t[e].push(o)},window.common.viewport.onFill=function(n,o){e[n]=window.common.viewport.fills(n),i[n]=i[n]||[],i[n].push(o)},window.common.viewport.onUnfill=function(n,o){e[n]=window.common.viewport.fills(n),a[n]=a[n]||[],a[n].push(o)},window.common.onScroll(function(n,e,c){$.each(o,function(o,t){!window.common.viewport.isIn(o,e)||e!=c&&window.common.viewport.isIn(o,c)||$.each(t,function(e,o){o(n)})}),$.each(t,function(o,t){window.common.viewport.isIn(o,e)||e!=c&&!window.common.viewport.isIn(o,c)||$.each(t,function(e,o){o(n)})}),$.each(i,function(o,t){!window.common.viewport.fills(o,e)||e!=c&&window.common.viewport.fills(o,c)||$.each(t,function(e,o){o(n)})}),$.each(a,function(o,t){window.common.viewport.fills(o,e)||e!=c&&!window.common.viewport.fills(o,c)||$.each(t,function(e,o){o(n)})})})}(),function(){window.common=window.common||{},window.common.urlState={},window.common.urlState.set=function(n){return window.history.pushState?(window.history.pushState(null,null,n),e(),!1):!0};var n=[];window.common.urlState.onChange=function(e){n.push(e)};var e=function(e,o){var o=location.pathname;for(var t in n)n[t](o)};$(function(){$(window).on("popstate",e)})}(),window.common.analytics.scrollDown=function(n){window.common.analytics.event("one-page","scroll-down","page-"+n,!0)},window.common.analytics.moduleHover=function(n,e){var o=e||$.trim($(n).text());window.common.analytics.event("one-page-menu","hover",o,!0)},window.common.analytics.moduleClick=function(n,e){var o=e||$.trim($(n).text());window.common.analytics.event("one-page-menu","click",o)},window.common.analytics.videoEvent=function(n,e){window.common.analytics.event("one-page","video-"+n,e)},window.common.analytics.videoEventNoninteraction=function(n,e){window.common.analytics.event("one-page","video-"+n,e,!0)},window.common.analytics.catalogClick=function(n){var e=$(n).text();window.common.analytics.event("one-page","catalog-click",e)},window.common.analytics.footerHover=function(n,e){var o=e||$.trim($(n).text());window.common.analytics.event("one-page","footer-hover",o,!0)},common.analytics.navClick=function(n){var e=$(n).find("figcaption h2").text();$("body").hasClass("somethingSelected")?common.analytics.footerClick(null,e):common.analytics.moduleClick(null,e)},$(function(){var n=$("body");common.viewport.onEnter(".sharedStories .teaser",function(e){e&&!n.hasClass("somethingSelected")&&common.analytics.scrollDown(1)}),common.viewport.onEnter("footer",function(e){e&&!n.hasClass("somethingSelected")&&common.analytics.scrollDown(2)}),$(".module .teaser").on("mouseover",function(){var e=$(this).find("figcaption h2").text();n.hasClass("somethingSelected")?common.analytics.footerHover(null,e):common.analytics.moduleHover(null,e)});var e=["play","pause","resume","replay","scroll-in","scroll-pause","scroll-resume","pause-other-played","pause-navigate","scrub","volume","stop","watch-50%","watch-100%"];$(".playerContainer video").each(function(n,o){$.each(e,function(n,e){$(o).on("china-player-"+e,function(n,o){common.analytics.videoEvent(e,o)})})})});var customPath="/discover/on-exhibit/china/",browserName,browserVersion,webfontType;if("undefined"==typeof woffEnabled)var woffEnabled=!0;var svgEnabled=1,woff2Enabled=1;if("undefined"!=typeof customPath)var path=customPath;else{var scripts=document.getElementsByTagName("SCRIPT"),script=scripts[scripts.length-1].src;script.match("://")||"/"==script.charAt(0)||(script="./"+script),path=script.replace(/\\/g,"/").replace(/\/[^\/]*\/?$/,"")}var wfpath=path+"/webfonts/",browsers=[{regex:"MSIE (\\d+\\.\\d+)",versionRegex:"new Number(RegExp.$1)",type:[{version:9,type:"woff"},{version:5,type:"eot"}]},{regex:"Trident/(\\d+\\.\\d+); (.+)?rv:(\\d+\\.\\d+)",versionRegex:"new Number(RegExp.$3)",type:[{version:11,type:"woff"}]},{regex:"Firefox[/s](\\d+\\.\\d+)",versionRegex:"new Number(RegExp.$1)",type:[{version:3.6,type:"woff"},{version:3.5,type:"ttf"}]},{regex:"Chrome/(\\d+\\.\\d+)",versionRegex:"new Number(RegExp.$1)",type:[{version:36,type:"woff2"},{version:6,type:"woff"},{version:4,type:"ttf"}]},{regex:"Mozilla.*Android (\\d+\\.\\d+).*AppleWebKit.*Safari",versionRegex:"new Number(RegExp.$1)",type:[{version:4.1,type:"woff"},{version:3.1,type:"svg#wf"},{version:2.2,type:"ttf"}]},{regex:"Mozilla.*(iPhone|iPad).* OS (\\d+)_(\\d+).* AppleWebKit.*Safari",versionRegex:"new Number(RegExp.$2) + (new Number(RegExp.$3) / 10)",unhinted:!0,type:[{version:5,type:"woff"},{version:4.2,type:"ttf"},{version:1,type:"svg#wf"}]},{regex:"Mozilla.*(iPhone|iPad|BlackBerry).*AppleWebKit.*Safari",versionRegex:"1.0",type:[{version:1,type:"svg#wf"}]},{regex:"Version/(\\d+\\.\\d+)(\\.\\d+)? Safari/(\\d+\\.\\d+)",versionRegex:"new Number(RegExp.$1)",type:[{version:5.1,type:"woff"},{version:3.1,type:"ttf"}]},{regex:"Opera/(\\d+\\.\\d+)(.+)Version/(\\d+\\.\\d+)(\\.\\d+)?",versionRegex:"new Number(RegExp.$3)",type:[{version:24,type:"woff2"},{version:11.1,type:"woff"},{version:10.1,type:"ttf"}]}],browLen=browsers.length,suffix="",i=0;n:for(;browLen>i;i++){var regex=RegExp(browsers[i].regex);if(regex.test(navigator.userAgent)){browserVersion=eval(browsers[i].versionRegex);var typeLen=browsers[i].type.length;for(j=0;j<typeLen;j++)if(browserVersion>=browsers[i].type[j].version&&(1==browsers[i].unhinted&&(suffix="_unhinted"),webfontType=browsers[i].type[j].type,"woff"!=webfontType||woffEnabled)&&("woff2"!=webfontType||woff2Enabled)&&("svg#wf"!=webfontType||svgEnabled))break n}else webfontType="woff"}/(Macintosh|Android)/.test(navigator.userAgent)&&"svg#wf"!=webfontType&&(suffix="_unhinted");var head=document.getElementsByTagName("head")[0],stylesheet=document.createElement("style");stylesheet.setAttribute("type","text/css"),head.appendChild(stylesheet);for(var fonts=[{fontFamily:"FFBauWeb",url:wfpath+"2E3942_0"+suffix+"_0."+webfontType},{fontFamily:"FFBauWebItalic",url:wfpath+"2E3942_1"+suffix+"_0."+webfontType},{fontFamily:"FFBauWebBold",url:wfpath+"2E3942_2"+suffix+"_0."+webfontType}],len=fonts.length,css="",i=0;len>i;i++){var format="svg#wf"==webfontType?'format("svg")':"ttf"==webfontType?'format("truetype")':"eot"==webfontType?"":'format("'+webfontType+'")',css=css+("@font-face{font-family: "+fonts[i].fontFamily+";src:url("+fonts[i].url+")"+format+";");fonts[i].fontWeight&&(css+="font-weight: "+fonts[i].fontWeight+";"),fonts[i].fontStyle&&(css+="font-style: "+fonts[i].fontStyle+";"),css+="}"}stylesheet.styleSheet?stylesheet.styleSheet.cssText=css:stylesheet.innerHTML=css,china={},$(function(){var n=$("body"),e=function(e){var o=e.replace(/\/$/,"").split("/").pop();"china"==o?n.removeClass("somethingSelected"):n.addClass("somethingSelected"),$(".selected").removeClass("selected"),$(".stub--"+o).addClass("selected"),$(document).scrollTop(0),common.analytics.changePage()};common.urlState.onChange(e)}),function(){function n(n){var e=this;const o=5e3;var t=null,i=null,a=null,c=null,r=null,s=null,l=null,m=null,f=!1,u=!1,d=0,w=null,p=null,v=null,h=function(){return(new Date).getTime()},y=function(){return w},g=function(){return!w},b=function(n){r.trigger("china-player-"+n,r.attr("id"))};e.isPlaying=function(){return i},e.setIdle=function(){a.addClass("muted"),c.muted=!0,c.loop=!0,t=!0,i=!1},e.play=function(){t&&(a.removeClass("muted"),c.currentTime=0,c.muted=!1,c.loop=!1,t=!1),f?b(u?"replay":"resume"):(b("play"),f=!0),a.removeClass("paused stopped"),$.each(china.players,function(){this.isPlaying()&&(b("pause-other-played"),this.pause())}),c.play(),i=!0},e.pause=function(){i&&x()},e.pauseLeavePage=function(){i&&(x(),b("pause-navigate"))};var x=function(){a.removeClass("ended immediate"),a.addClass("paused"),c.pause(),i=!1};e.ended=function(){a.removeClass("immediate"),a.addClass("paused ended"),g()&&a.addClass("stopped"),i=!1,b("watch-100%"),u=!0},e.setTime=function(n){i&&d/c.duration<.5&&n/c.duration>=.5&&b("watch-50%");var e=Math.floor(n);s.text(Math.floor(e/60)+":"+("0"+e%60).slice(-2)),d=n};var C=function(n,e){return n/c.duration*100*(e?-1:1)+(e?100:0)+"%"};e.updateProgress=function(){var n=(c.duration,a.find(".loaded"));if(c.buffered.length!=n.length){n.remove();for(var e=a.find(".progress"),o=0;o<c.buffered.length;o++)e.append('<span class="loaded"></span>');n=a.find(".loaded")}for(var o=0;o<c.buffered.length;o++)n.eq(o).css({left:C(c.buffered.start(o)),right:C(c.buffered.end(o),!0)});l.css("width",C(c.currentTime))};var S=function(n,e,o,t,a){o=o||0,n.on("mousedown",function(n){b(a);var r=$(this).width(),s=n.offsetX,l=n.pageX;t&&c.pause(),e(k(r,s,l,l,o)),$(document).on("mousemove.scrubbing",function(n){e(k(r,s,l,n.pageX,o))}).on("mouseup.scrubbing",function(n){$(document).off(".scrubbing"),e(k(r,s,l,n.pageX,o)),i&&t&&c.play(),isScrubbing=!1})}).on("click",function(){return!1})},k=function(n,e,o,t,i){var a=t-o+e,c=Math.max(Math.min(a,n-i),i);return(1*c-i)/(n-2*i)},E=function(n){c.currentTime=n*c.duration},T=function(n){var e=n,o=Math.floor(4*n);p!=o&&(p=o,a.removeClass("volume-0 volume-1 volume-2 volume-3 volume-4").addClass("volume-"+p)),v!=e&&(v=e,c.volume=v)},R=function(){a=$(n),r=a.find("video"),c=r[0],a.click(function(){i?(e.pause(),b("pause")):e.play()});var f="#"+r.attr("id");common.viewport.onEnter(f,function(){a.is(":visible")&&(t?(c.play(),b("scroll-in")):m>h()-o&&(a.addClass("immediate"),e.play(),b("scroll-resume")))}),common.viewport.onExit(f,function(){t?c.pause():i&&(e.pause(),b("scroll-pause"),m=h())}),r.on("ended",function(){e.ended()}),w=a.hasClass("playerContainer--person"),y()?e.setIdle():g()&&(s=a.find(".time"),l=a.find(".viewed"),r.on("timeupdate",function(){e.setTime(c.currentTime),e.updateProgress()}),a.find(".stop").click(function(){return e.pause(),a.addClass("stopped"),b("stop"),!1}),S(a.find(".progress"),E,null,!0,"scrub"),S(a.find(".volume"),T,16,null,"volume"))};R(),delete R}$(function(){china.players=[],$(".playerContainer").each(function(){player=new n(this),china.players.push(player)}),common.urlState.onChange(function(){$.each(china.players,function(){this.pauseLeavePage()})})})}(),$(function(){china.bitShaver={},china.bitShaver.enableImage=function(n){n.attr("src",n.attr("data-src")),n.attr("srcset",n.attr("data-srcset"))},china.bitShaver.enableVideo=function(n){var e=n.parent();n.detach(),n.attr("src",n.attr("data-src")),n.attr("data-src",""),e.append(n)};var n=function(){$(".selected, .moduleContainer").find("img").each(function(){china.bitShaver.enableImage($(this))}),$(".selected").find("video source").each(function(){china.bitShaver.enableVideo($(this))})};common.urlState.onChange(n),n()});