function updateProgressBar(){currentlyPlaying&&currentlyPlayingPb&&(currentlyPlayingPb.css("width",100*currentlyPlaying.currentTime/currentlyPlaying.duration+"%"),currentlyPlaying.paused||requestAnimationFrame(updateProgressBar))}function trayOpen(n,t){$("body").addClass("trayOpen trayOpen--"+t),common.analytics.headerNavClick(n)}function trayClose(){$("body").removeClass("trayOpen"),common.analytics.trayClick(null,"tray-close"),$(".tray").one("transitionend",function(){$("body").removeClass("trayOpen--visit trayOpen--educators trayOpen--programs")})}function interpolate(n,t,o,e,i){return e+(i-e)*((n-t)/(o-t))}!function(n,t){"use strict";"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():n.viewportUnitsBuggyfill=t()}(this,function(){"use strict";function n(n,t){var o;return function(){var e=this,i=arguments,a=function(){n.apply(e,i)};clearTimeout(o),o=setTimeout(a,t)}}function t(){try{return window.self!==window.top}catch(n){return!0}}function o(o){y||(o===!0&&(o={force:!0}),v=o||{},v.isMobileSafari=b,v.isBadStockAndroid=T,(v.force||b||P||T||x||v.hacks&&v.hacks.required(v))&&(v.hacks&&v.hacks.initialize(v),y=!0,w=document.createElement("style"),w.id="patched-viewport",document.head.appendChild(w),d(function(){var o=n(i,v.refreshDebounceWait||100);window.addEventListener("orientationchange",o,!0),window.addEventListener("pageshow",o,!0),(v.force||P||t())&&(window.addEventListener("resize",o,!0),v._listeningToResize=!0),v.hacks&&v.hacks.initializeEvents(v,i,o),i()})))}function e(){w.textContent=c(),w.parentNode.appendChild(w)}function i(){y&&(a(),setTimeout(function(){e()},1))}function a(){return g=[],C.call(document.styleSheets,function(n){"patched-viewport"!==n.ownerNode.id&&n.cssRules&&"ignore"!==n.ownerNode.getAttribute("data-viewport-units-buggyfill")&&(n.media&&n.media.mediaText&&window.matchMedia&&!window.matchMedia(n.media.mediaText).matches||C.call(n.cssRules,r))}),g}function r(n){if(7===n.type){var t;try{t=n.cssText}catch(o){return}return k.lastIndex=0,void(k.test(t)&&(g.push([n,null,t]),v.hacks&&v.hacks.findDeclarations(g,n,null,t)))}if(!n.style){if(!n.cssRules)return;return void C.call(n.cssRules,function(n){r(n)})}C.call(n.style,function(t){var o=n.style.getPropertyValue(t);n.style.getPropertyPriority(t)&&(o+=" !important"),k.lastIndex=0,k.test(o)&&(g.push([n,t,o]),v.hacks&&v.hacks.findDeclarations(g,n,t,o))})}function c(){p=u();var n,t,o=[],e=[];return g.forEach(function(i){var a=s.apply(null,i),r=a.selector.length?a.selector.join(" {\n")+" {\n":"",c=new Array(a.selector.length+1).join("\n}");return r&&r===n?(r&&!n&&(n=r,t=c),void e.push(a.content)):(e.length&&(o.push(n+e.join("\n")+t),e.length=0),void(r?(n=r,t=c,e.push(a.content)):(o.push(a.content),n=null,t=null)))}),e.length&&o.push(n+e.join("\n")+t),x&&o.push("* { content: normal !important; }"),o.join("\n\n")}function s(n,t,o){var e,i=[];e=o.replace(k,l),v.hacks&&(e=v.hacks.overwriteDeclaration(n,t,e)),t&&(i.push(n.selectorText),e=t+": "+e+";");for(var a=n.parentRule;a;)i.unshift("@media "+a.media.mediaText),a=a.parentRule;return{selector:i,content:e}}function l(n,t,o){var e=p[o],i=parseFloat(t)/100;return i*e+"px"}function u(){var n=window.innerHeight,t=window.innerWidth;return{vh:n,vw:t,vmax:Math.max(t,n),vmin:Math.min(t,n)}}function d(n){var t=0,o=function(){t--,t||n()};C.call(document.styleSheets,function(n){n.href&&m(n.href)!==m(location.href)&&(t++,f(n.ownerNode,o))}),t||n()}function m(n){return n.slice(0,n.indexOf("/",n.indexOf("://")+3))}function f(n,t){h(n.href,function(){var o=document.createElement("style");o.media=n.media,o.setAttribute("data-href",n.href),o.textContent=this.responseText,n.parentNode.replaceChild(o,n),t()},t)}function h(n,t,o){var e=new XMLHttpRequest;if("withCredentials"in e)e.open("GET",n,!0);else{if("undefined"==typeof XDomainRequest)throw new Error("cross-domain XHR not supported");e=new XDomainRequest,e.open("GET",n)}return e.onload=t,e.onerror=o,e.send(),e}var v,p,g,w,y=!1,$=window.navigator.userAgent,k=/([+-]?[0-9.]+)(vh|vw|vmin|vmax)/g,C=[].forEach,P=!1,x=$.indexOf("Opera Mini")>-1,b=/(iPhone|iPod|iPad).+AppleWebKit/i.test($)&&function(){var n=$.match(/OS (\d)/);return n&&n.length>1&&parseInt(n[1])<8}(),T=function(){var n=$.indexOf(" Android ")>-1;if(!n)return!1;var t=$.indexOf("Version/")>-1;if(!t)return!1;var o=parseFloat(($.match("Android ([0-9.]+)")||[])[1]);return 4.4>=o}();return P||(P=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./)),{version:"0.5.1",findProperties:a,getCss:c,init:o,refresh:i}}),window.common=window.common||{},window.common.analytics=window.common.analytics||{},window.common.analytics.buyTicketsButtonClick=function(n,t){var o=$(n).attr("href");window.common.analytics.event("ticketing","ticketing-exhibition-microsite-"+t,o)},window.common.analytics.scrollDownButtonClick=function(){window.common.analytics.event("one-page","scroll-down-button-click")},window.common.analytics.sponsorLogoClick=function(n){window.common.analytics.event("one-page","logo-click",n)},window.common.analytics.headerNavClick=function(n){var t=$(n).text();window.common.analytics.event("one-page","header-nav-click",t)},window.common.analytics.jumpNavClick=function(n){var t=$.trim($(n).text());window.common.analytics.event("one-page","jump-nav-click",t)},window.common.analytics.visitClick=function(n){var t=$.trim($(n).text());window.common.analytics.event("one-page","visit-click",t)},window.common.analytics.footerClick=function(n,t){var o=t||$.trim($(n).text());window.common.analytics.event("one-page","footer-click",o)},window.common.analytics.trayClick=function(n,t,o){var e=t||$.trim($(n).text());window.common.analytics.event("one-page","tray-click"+(o?o:""),e)},window.common.analytics.introFMLogoClick=function(){window.common.analytics.event("one-page","intro-fm-logo-click")},window.common.analytics.audioEvent=function(n,t){window.common.analytics.event("one-page",n,t)},window.common.analytics.event=function(n,t,o,e){ga("send","event",n,t,o,e?{nonInteraction:1}:null)},window.common.analytics.changePage=function(){ga("set","page",window.location.pathname+window.location.hash),ga("send","pageview")},$(function(){for(var n in svgManifest)$.ajax({url:svgManifest[n],complete:function(n){$(".svgHideContainer").append(n.responseText)}})}),window.vikings={};var currentlyPlaying=null,currentlyPlayingPb=null;$(function(){$(".audioPlayer__playPause").click(function(){var n=$(this).closest(".audioPlayer"),t=n.find("audio")[0],o=!t.paused;o?(t.pause(),common.analytics.audioEvent("audio-pause",t.currentSrc)):(currentlyPlaying&&!currentlyPlaying.paused&&currentlyPlaying.pause(),t.play(),currentlyPlaying=t,currentlyPlayingPb=n.find(".audioPlayer__progressBar__progress"),n.addClass("playing"),requestAnimationFrame(updateProgressBar))}),$(".audioPlayer audio").on("pause",function(){$(this).closest(".audioPlayer").removeClass("playing")}),$(".audioPlayer audio").on("play",function(){common.analytics.audioEvent("audio-play",this.currentSrc)}),$(".audioPlayer audio").on("ended",function(){common.analytics.audioEvent("audio-listen-100%",this.currentSrc)}),$(".audioPlayer audio").on("timeupdate",function(){var n=$(this);this.currentTime>this.duration/2&&!n.data("half-played")&&($(this).data("half-played",!0),common.analytics.audioEvent("audio-listen-50%",this.currentSrc))})}),$(function(){$(document).on("click",".tray a",function(){common.analytics.trayClick(this)})}),$(function(){$(".tray").on("transitionend",function(n){n.target.style.overflowY="hidden",setTimeout(function(){n.target.style.overflowY="auto"})})}),$(function(){var n,t,o,e,i,a,r=$(".filmstrip"),c=r.height(),s=$(".stickyHeader").height(),l=14,u=0,d=function(){n=r.offset().top,t=$(window).height(),o=$(document).height(),e=n+c-t-20,i=Math.min(n-s,o-t)-10,a=(i-e)/(l-1)};$(window).resize(d),$(window).load(d);var m=function(){if(!(e>n&&0==u)){var n=$(document).scrollTop(),t=Math.min(Math.max(Math.round((n-e)/a),0),l-1);t!=u&&(u=t,r.css("background-position-y",c*t*-1))}};common.onScroll(function(){requestAnimationFrame(m)})}),function(){function n(n){t.push(n)}var t=[];window.common.onScroll=n,$(function(){var n=$(document),o=n.scrollTop();$(document).scroll(function(){var e=n.scrollTop(),i=e>o;for(var a in t)t[a](i,e,o);o=e})})}(),function(){window.vikings.sectionFrontMargin=function(n){return"believers"==n.attr("id")?-1*$(window).height()/2:"world"==n.attr("id")?0:100}}(),function(){var n=[];window.vikings.onHashChange=function(t){n.push(t)},window.vikings.changeHash=function(t,o){t=t||window.location.hash.substring(1);for(var e in n)n[e](t,o)}}();var hasBeenToAnySectionBesidesIntro=!1;$(function(){function n(n){var o=t[0];for(var e in t){if(e>n)return o;o=t[e]}return o}var t={},o=function(){t={},$(".slide").each(function(){var n=$(this),o=$(this).offset();t[Math.max(o.top-vikings.sectionFrontMargin(n),0)]=this.id})};$(window).resize(o),o();var e=document.location.hash.substring(1),i=function(t,o){o=o||$(document).scrollTop();var i=n(o);e!=i&&(e=i,hasBeenToAnySectionBesidesIntro=hasBeenToAnySectionBesidesIntro||"introduction"!=e,!vikings.suspendScrollEvents&&hasBeenToAnySectionBesidesIntro&&common.analytics.event("one-page","section-scroll-enter",e,!0),vikings.changeHash(i))};common.onScroll(i)}),$(function(){$(".jumpNav__link, .button--excited").click(function(){vikings.suspendScrollEvents=!0;var n=$(this.hash),t=this.hash.substring(1);if(n.length){var o=vikings.sectionFrontMargin(n)-1;return $("html,body").animate({scrollTop:n.offset().top-o},{duration:500,easing:"easeInOutExpo",complete:function(){vikings.suspendScrollEvents=!1}}),vikings.changeHash(t,!0),!1}})}),function(){vikings.onHashChange(function(n){var t=$(".js--jumpNav__link--"+n);t.length&&($(".jumpNav__link--selected").removeClass("jumpNav__link--selected"),t.addClass("jumpNav__link--selected"))}),vikings.onHashChange(function(n){"introduction"==n?$(".stickyHeader").hide():$(".stickyHeader").show()}),vikings.onHashChange(function(n){"traders-craftspeople"==n||"voyagers"==n||"believers"==n||"visit"==n?$(".map").hide():$(".map").show()})}(),$(function(){var n,t,o,e,i,a=$(".map img"),r=$(".map"),c=$(".slide--farmers"),s=$(".slide--world"),l=[0,8,19],u=[40,166,225],d=[109,207,246],m=function(){n=$(window).height(),o=s.offset().top,t=o-n,i=c.offset().top,e=i-n};$(window).resize(m),$(window).load(m);var f=null,h=function(n){return t>n||n>i?0:n>o&&e>n?1:e>n?(n-t)/(o-t):(n-e)/(i-e)-1},v=function(n,t,o,e){var i,a,r;if(0==e?r=n:1==e?r=t:e>0?(i=t,a=n):0>e&&(i=t,a=o),!r){var r=[];for(var c in i)r.push(Math.round(interpolate(Math.abs(e),1,0,i[c],a[c])))}return"rgb("+r.join(",")+")"},p=function(){var n=$(document).scrollTop(),t=h(n);t&&f!=t&&(f=t,a.css("opacity",Math.abs(t)),r.css("background",v(l,u,d,t).toString()))};common.onScroll(function(){requestAnimationFrame(p)})}),$(function(){var n,t,o,e,i,a,r=$(".aurora"),c=$(".filmstrip"),s=$(".slide--voyagers"),l=$(".whoTheyWere--believers"),u=$(".shipProws"),d=function(){n=$(window).height(),t=$(document).height(),o=u.offset().top+u.outerHeight(),e=s.offset().top+s.height(),i=l.offset().top-n/2,a=c.offset().top-n};$(window).resize(d),$(window).load(d);var m=null,f=function(n){return o>n||n>a?0:n>e&&i>n?1:i>n?(n-o)/(e-o):1-(n-i)/(a-i)},h=function(){var n=$(document).scrollTop(),t=f(n);m!=t&&(m=t,r.css("opacity",t))};common.onScroll(function(){requestAnimationFrame(h)})}),vikings.zoom={},vikings.zoom.toggle=function(n){var t=$(n?n:".zoom:not(.minimized)");$(".overlay").toggleClass("hidden"),t.toggleClass("minimized animating"),setTimeout(function(){t.removeClass("animating")},1e3);var o=t.hasClass("minimized"),e=t.find(".zoom__title").text();common.analytics.event("one-page",o?"modal-close":"modal-open",e)},vikings.zoom.nav=function(n,t,o){var e=$(n).parents(".zoom"),i=o?e.prev(".zoom"):e.next(".zoom");e.addClass("zoom__navigating"),i.addClass("zoom__navigating"),e.toggleClass("minimized"),i.toggleClass("minimized"),setTimeout(function(){e.removeClass("zoom__navigating"),i.removeClass("zoom__navigating")},100),t.stopPropagation();var a=e.find(".zoom__title").text();return common.analytics.event("one-page",o?"modal-back":"modal-next",a),!1},vikings.zoom.figureClick=function(n,t){$(n).parent(".minimized").length||t.stopPropagation()},viewportUnitsBuggyfill.init(),$(function(){$(window).on("hashchange",function(){console.log("blat!")})}),$(function(){$(document).scroll()}),$(window).resize(function(){$(document).scroll()});