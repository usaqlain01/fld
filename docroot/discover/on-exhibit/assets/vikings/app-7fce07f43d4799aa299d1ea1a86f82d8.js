function updateProgressBar(){currentlyPlaying&&currentlyPlayingPb&&(currentlyPlayingPb.css("width",100*currentlyPlaying.currentTime/currentlyPlaying.duration+"%"),currentlyPlaying.paused||requestAnimationFrame(updateProgressBar))}function trayOpen(n,t){$("body").addClass("trayOpen trayOpen--"+t),common.analytics.headerNavClick(n)}function trayClose(){$("body").removeClass("trayOpen"),common.analytics.trayClick(null,"tray-close"),$(".tray").one("transitionend",function(){$("body").removeClass("trayOpen--visit trayOpen--educators trayOpen--programs")})}function interpolate(n,t,i,e,o){return e+(o-e)*((n-t)/(i-t))}!function(n,t){"use strict";"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():n.viewportUnitsBuggyfill=t()}(this,function(){"use strict";function n(n,t){var i;return function(){var e=this,o=arguments,a=function(){n.apply(e,o)};clearTimeout(i),i=setTimeout(a,t)}}function t(){try{return window.self!==window.top}catch(n){return!0}}function i(i){y||(i===!0&&(i={force:!0}),h=i||{},h.isMobileSafari=b,h.isBadStockAndroid=T,(h.force||b||P||T||x||h.hacks&&h.hacks.required(h))&&(h.hacks&&h.hacks.initialize(h),y=!0,w=document.createElement("style"),w.id="patched-viewport",document.head.appendChild(w),d(function(){var i=n(o,h.refreshDebounceWait||100);window.addEventListener("orientationchange",i,!0),window.addEventListener("pageshow",i,!0),(h.force||P||t())&&(window.addEventListener("resize",i,!0),h._listeningToResize=!0),h.hacks&&h.hacks.initializeEvents(h,o,i),o()})))}function e(){w.textContent=s(),w.parentNode.appendChild(w)}function o(){y&&(a(),setTimeout(function(){e()},1))}function a(){return p=[],C.call(document.styleSheets,function(n){"patched-viewport"!==n.ownerNode.id&&n.cssRules&&"ignore"!==n.ownerNode.getAttribute("data-viewport-units-buggyfill")&&(n.media&&n.media.mediaText&&window.matchMedia&&!window.matchMedia(n.media.mediaText).matches||C.call(n.cssRules,r))}),p}function r(n){if(7===n.type){var t;try{t=n.cssText}catch(i){return}return k.lastIndex=0,void(k.test(t)&&(p.push([n,null,t]),h.hacks&&h.hacks.findDeclarations(p,n,null,t)))}if(!n.style){if(!n.cssRules)return;return void C.call(n.cssRules,function(n){r(n)})}C.call(n.style,function(t){var i=n.style.getPropertyValue(t);n.style.getPropertyPriority(t)&&(i+=" !important"),k.lastIndex=0,k.test(i)&&(p.push([n,t,i]),h.hacks&&h.hacks.findDeclarations(p,n,t,i))})}function s(){g=u();var n,t,i=[],e=[];return p.forEach(function(o){var a=c.apply(null,o),r=a.selector.length?a.selector.join(" {\n")+" {\n":"",s=new Array(a.selector.length+1).join("\n}");return r&&r===n?(r&&!n&&(n=r,t=s),void e.push(a.content)):(e.length&&(i.push(n+e.join("\n")+t),e.length=0),void(r?(n=r,t=s,e.push(a.content)):(i.push(a.content),n=null,t=null)))}),e.length&&i.push(n+e.join("\n")+t),x&&i.push("* { content: normal !important; }"),i.join("\n\n")}function c(n,t,i){var e,o=[];e=i.replace(k,l),h.hacks&&(e=h.hacks.overwriteDeclaration(n,t,e)),t&&(o.push(n.selectorText),e=t+": "+e+";");for(var a=n.parentRule;a;)o.unshift("@media "+a.media.mediaText),a=a.parentRule;return{selector:o,content:e}}function l(n,t,i){var e=g[i],o=parseFloat(t)/100;return o*e+"px"}function u(){var n=window.innerHeight,t=window.innerWidth;return{vh:n,vw:t,vmax:Math.max(t,n),vmin:Math.min(t,n)}}function d(n){var t=0,i=function(){t--,t||n()};C.call(document.styleSheets,function(n){n.href&&m(n.href)!==m(location.href)&&(t++,f(n.ownerNode,i))}),t||n()}function m(n){return n.slice(0,n.indexOf("/",n.indexOf("://")+3))}function f(n,t){v(n.href,function(){var i=document.createElement("style");i.media=n.media,i.setAttribute("data-href",n.href),i.textContent=this.responseText,n.parentNode.replaceChild(i,n),t()},t)}function v(n,t,i){var e=new XMLHttpRequest;if("withCredentials"in e)e.open("GET",n,!0);else{if("undefined"==typeof XDomainRequest)throw new Error("cross-domain XHR not supported");e=new XDomainRequest,e.open("GET",n)}return e.onload=t,e.onerror=i,e.send(),e}var h,g,p,w,y=!1,$=window.navigator.userAgent,k=/([+-]?[0-9.]+)(vh|vw|vmin|vmax)/g,C=[].forEach,P=!1,x=$.indexOf("Opera Mini")>-1,b=/(iPhone|iPod|iPad).+AppleWebKit/i.test($)&&function(){var n=$.match(/OS (\d)/);return n&&n.length>1&&parseInt(n[1])<8}(),T=function(){var n=$.indexOf(" Android ")>-1;if(!n)return!1;var t=$.indexOf("Version/")>-1;if(!t)return!1;var i=parseFloat(($.match("Android ([0-9.]+)")||[])[1]);return 4.4>=i}();return P||(P=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./)),{version:"0.5.1",findProperties:a,getCss:s,init:i,refresh:o}}),window.common=window.common||{},window.common.analytics=window.common.analytics||{},window.common.analytics.buyTicketsButtonClick=function(n,t){var i=$(n).attr("href");window.common.analytics.event("ticketing","ticketing-exhibition-microsite-"+t,i)},window.common.analytics.scrollDownButtonClick=function(){window.common.analytics.event("one-page","scroll-down-button-click")},window.common.analytics.sponsorLogoClick=function(n){window.common.analytics.event("one-page","logo-click",n)},window.common.analytics.headerNavClick=function(n){var t=$(n).text();window.common.analytics.event("one-page","header-nav-click",t)},window.common.analytics.jumpNavClick=function(n){var t=$.trim($(n).text());window.common.analytics.event("one-page","jump-nav-click",t)},window.common.analytics.visitClick=function(n){var t=$.trim($(n).text());window.common.analytics.event("one-page","visit-click",t)},window.common.analytics.trayClick=function(n,t){var i=t||$.trim($(n).text());window.common.analytics.event("one-page","tray-click",i)},window.common.analytics.introFMLogoClick=function(){window.common.analytics.event("one-page","intro-fm-logo-click")},window.common.analytics.audioEvent=function(n,t){window.common.analytics.event("one-page",n,t)},window.common.analytics.event=function(n,t,i,e){ga("send","event",n,t,i,e?{nonInteraction:1}:null)},$(function(){for(var n in svgManifest)$.ajax({url:svgManifest[n],complete:function(n){$(".svgHideContainer").append(n.responseText)}})}),window.vikings={};var currentlyPlaying=null,currentlyPlayingPb=null;$(function(){$(".audioPlayer__playPause").click(function(){var n=$(this).closest(".audioPlayer"),t=n.find("audio")[0],i=!t.paused;i?(t.pause(),common.analytics.audioEvent("audio-pause",t.currentSrc)):(currentlyPlaying&&!currentlyPlaying.paused&&currentlyPlaying.pause(),t.play(),currentlyPlaying=t,currentlyPlayingPb=n.find(".audioPlayer__progressBar__progress"),n.addClass("playing"),requestAnimationFrame(updateProgressBar))}),$(".audioPlayer audio").on("pause",function(){$(this).closest(".audioPlayer").removeClass("playing")}),$(".audioPlayer audio").on("play",function(){common.analytics.audioEvent("audio-play",this.currentSrc)}),$(".audioPlayer audio").on("ended",function(){common.analytics.audioEvent("audio-listen-100%",this.currentSrc)}),$(".audioPlayer audio").on("timeupdate",function(){var n=$(this);this.currentTime>this.duration/2&&!n.data("half-played")&&($(this).data("half-played",!0),common.analytics.audioEvent("audio-listen-50%",this.currentSrc))})}),$(function(){$(document).on("click",".tray a",function(){common.analytics.trayClick(this)})}),$(function(){$(".tray").on("transitionend",function(n){n.target.style.overflowY="hidden",setTimeout(function(){n.target.style.overflowY="auto"})})}),$(function(){var n,t,i,e,o,a,r=$(".filmstrip"),s=r.height(),c=$(".logoHeader").height(),l=14,u=0,d=function(){n=r.offset().top,t=$(window).height(),i=$(document).height(),e=n+s-t-20,o=Math.min(n-c,i-t)-10,a=(o-e)/(l-1)};$(window).resize(d),$(window).load(d);var m=function(){if(!(e>n&&0==u)){var n=$(document).scrollTop(),t=Math.min(Math.max(Math.round((n-e)/a),0),l-1);t!=u&&(u=t,r.css("background-position-y",s*t*-1))}};vikings.onScroll(function(){requestAnimationFrame(m)})}),function(){function n(n){t.push(n)}var t=[];window.vikings.onScroll=n,window.vikings.sectionFrontMargin=function(n){return"believers"==n.attr("id")?-1*$(window).height()/2:"world"==n.attr("id")?0:100},$(function(){var n=$(document),i=n.scrollTop();$(document).scroll(function(){var e=n.scrollTop(),o=e>i;for(var a in t)t[a](o,e,i);i=e})})}(),function(){var n=[];window.vikings.onHashChange=function(t){n.push(t)},window.vikings.changeHash=function(t,i){t=t||window.location.hash.substring(1);for(var e in n)n[e](t,i)}}();var hasBeenToAnySectionBesidesIntro=!1;$(function(){function n(n){var i=t[0];for(var e in t){if(e>n)return i;i=t[e]}return i}var t={},i=function(){t={},$(".slide").each(function(){var n=$(this),i=$(this).offset();t[Math.max(i.top-vikings.sectionFrontMargin(n),0)]=this.id})};$(window).resize(i),i();var e=document.location.hash.substring(1),o=function(t,i){i=i||$(document).scrollTop();var o=n(i);e!=o&&(e=o,hasBeenToAnySectionBesidesIntro=hasBeenToAnySectionBesidesIntro||"introduction"!=e,!vikings.suspendScrollEvents&&hasBeenToAnySectionBesidesIntro&&common.analytics.event("one-page","section-scroll-enter",e,!0),vikings.changeHash(o))};vikings.onScroll(o)}),$(function(){$(".jumpNav__link, .button--excited").click(function(){vikings.suspendScrollEvents=!0;var n=$(this.hash),t=this.hash.substring(1);if(n.length){var i=vikings.sectionFrontMargin(n)-1;return $("html,body").animate({scrollTop:n.offset().top-i},{duration:500,easing:"easeInOutExpo",complete:function(){vikings.suspendScrollEvents=!1}}),vikings.changeHash(t,!0),!1}})}),function(){vikings.onHashChange(function(n){var t=$(".js--jumpNav__link--"+n);t.length&&($(".jumpNav__link--selected").removeClass("jumpNav__link--selected"),t.addClass("jumpNav__link--selected"))}),vikings.onHashChange(function(n){"introduction"==n?$(".logoHeader").hide():$(".logoHeader").show()}),vikings.onHashChange(function(n){"traders-craftspeople"==n||"voyagers"==n||"believers"==n||"visit"==n?$(".map").hide():$(".map").show()})}(),$(function(){var n,t,i,e,o,a=$(".map img"),r=$(".map"),s=$(".slide--farmers"),c=$(".slide--world"),l=[0,8,19],u=[40,166,225],d=[109,207,246],m=function(){n=$(window).height(),i=c.offset().top,t=i-n,o=s.offset().top,e=o-n};$(window).resize(m),$(window).load(m);var f=null,v=function(n){return t>n||n>o?0:n>i&&e>n?1:e>n?(n-t)/(i-t):(n-e)/(o-e)-1},h=function(n,t,i,e){var o,a,r;if(0==e?r=n:1==e?r=t:e>0?(o=t,a=n):0>e&&(o=t,a=i),!r){var r=[];for(var s in o)r.push(Math.round(interpolate(Math.abs(e),1,0,o[s],a[s])))}return"rgb("+r.join(",")+")"},g=function(){var n=$(document).scrollTop(),t=v(n);t&&f!=t&&(f=t,a.css("opacity",Math.abs(t)),r.css("background",h(l,u,d,t).toString()))};vikings.onScroll(function(){requestAnimationFrame(g)})}),$(function(){var n,t,i,e,o,a,r=$(".aurora"),s=$(".filmstrip"),c=$(".slide--voyagers"),l=$(".whoTheyWere--believers"),u=$(".shipProws"),d=function(){n=$(window).height(),t=$(document).height(),i=u.offset().top+u.outerHeight(),e=c.offset().top+c.height(),o=l.offset().top-n/2,a=s.offset().top-n};$(window).resize(d),$(window).load(d);var m=null,f=function(n){return i>n||n>a?0:n>e&&o>n?1:o>n?(n-i)/(e-i):1-(n-o)/(a-o)},v=function(){var n=$(document).scrollTop(),t=f(n);m!=t&&(m=t,r.css("opacity",t))};vikings.onScroll(function(){requestAnimationFrame(v)})}),vikings.zoom={},vikings.zoom.toggle=function(n){var t=$(n?n:".zoom:not(.minimized)");$(".overlay").toggleClass("hidden"),t.toggleClass("minimized animating"),setTimeout(function(){t.removeClass("animating")},1e3);var i=t.hasClass("minimized"),e=t.find(".zoom__title").text();common.analytics.event("one-page",i?"modal-close":"modal-open",e)},vikings.zoom.nav=function(n,t,i){var e=$(n).parents(".zoom"),o=i?e.prev(".zoom"):e.next(".zoom");e.addClass("zoom__navigating"),o.addClass("zoom__navigating"),e.toggleClass("minimized"),o.toggleClass("minimized"),setTimeout(function(){e.removeClass("zoom__navigating"),o.removeClass("zoom__navigating")},100),t.stopPropagation();var a=e.find(".zoom__title").text();return common.analytics.event("one-page",i?"modal-back":"modal-next",a),!1},vikings.zoom.figureClick=function(n,t){$(n).parent(".minimized").length||t.stopPropagation()},viewportUnitsBuggyfill.init(),$(function(){$(window).on("hashchange",function(){console.log("blat!")})}),$(function(){$(document).scroll()}),$(window).resize(function(){$(document).scroll()});