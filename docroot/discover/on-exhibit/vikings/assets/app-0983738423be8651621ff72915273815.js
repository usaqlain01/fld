function updateProgressBar(){currentlyPlaying&&currentlyPlayingPb&&(currentlyPlayingPb.css("width",100*currentlyPlaying.currentTime/currentlyPlaying.duration+"%"),currentlyPlaying.paused||requestAnimationFrame(updateProgressBar))}function trayOpen(n,i){$("body").addClass("trayOpen trayOpen--"+i),vikings.analytics.headerNavClick(n)}function trayClose(){$("body").removeClass("trayOpen"),vikings.analytics.trayClick(null,"tray-close"),$(".tray").one("transitionend",function(){$("body").removeClass("trayOpen--visit trayOpen--educators trayOpen--programs")})}function interpolate(n,i,e,t,o){return t+(o-t)*((n-i)/(e-i))}!function(n,i){"use strict";"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?module.exports=i():n.viewportUnitsBuggyfill=i()}(this,function(){"use strict";function n(n,i){var e;return function(){var t=this,o=arguments,a=function(){n.apply(t,o)};clearTimeout(e),e=setTimeout(a,i)}}function i(){try{return window.self!==window.top}catch(n){return!0}}function e(e){y||(e===!0&&(e={force:!0}),h=e||{},h.isMobileSafari=b,h.isBadStockAndroid=T,(h.force||b||P||T||x||h.hacks&&h.hacks.required(h))&&(h.hacks&&h.hacks.initialize(h),y=!0,w=document.createElement("style"),w.id="patched-viewport",document.head.appendChild(w),d(function(){var e=n(o,h.refreshDebounceWait||100);window.addEventListener("orientationchange",e,!0),window.addEventListener("pageshow",e,!0),(h.force||P||i())&&(window.addEventListener("resize",e,!0),h._listeningToResize=!0),h.hacks&&h.hacks.initializeEvents(h,o,e),o()})))}function t(){w.textContent=s(),w.parentNode.appendChild(w)}function o(){y&&(a(),setTimeout(function(){t()},1))}function a(){return m=[],C.call(document.styleSheets,function(n){"patched-viewport"!==n.ownerNode.id&&n.cssRules&&"ignore"!==n.ownerNode.getAttribute("data-viewport-units-buggyfill")&&(n.media&&n.media.mediaText&&window.matchMedia&&!window.matchMedia(n.media.mediaText).matches||C.call(n.cssRules,r))}),m}function r(n){if(7===n.type){var i;try{i=n.cssText}catch(e){return}return $.lastIndex=0,void($.test(i)&&(m.push([n,null,i]),h.hacks&&h.hacks.findDeclarations(m,n,null,i)))}if(!n.style){if(!n.cssRules)return;return void C.call(n.cssRules,function(n){r(n)})}C.call(n.style,function(i){var e=n.style.getPropertyValue(i);n.style.getPropertyPriority(i)&&(e+=" !important"),$.lastIndex=0,$.test(e)&&(m.push([n,i,e]),h.hacks&&h.hacks.findDeclarations(m,n,i,e))})}function s(){p=u();var n,i,e=[],t=[];return m.forEach(function(o){var a=c.apply(null,o),r=a.selector.length?a.selector.join(" {\n")+" {\n":"",s=new Array(a.selector.length+1).join("\n}");return r&&r===n?(r&&!n&&(n=r,i=s),void t.push(a.content)):(t.length&&(e.push(n+t.join("\n")+i),t.length=0),void(r?(n=r,i=s,t.push(a.content)):(e.push(a.content),n=null,i=null)))}),t.length&&e.push(n+t.join("\n")+i),x&&e.push("* { content: normal !important; }"),e.join("\n\n")}function c(n,i,e){var t,o=[];t=e.replace($,l),h.hacks&&(t=h.hacks.overwriteDeclaration(n,i,t)),i&&(o.push(n.selectorText),t=i+": "+t+";");for(var a=n.parentRule;a;)o.unshift("@media "+a.media.mediaText),a=a.parentRule;return{selector:o,content:t}}function l(n,i,e){var t=p[e],o=parseFloat(i)/100;return o*t+"px"}function u(){var n=window.innerHeight,i=window.innerWidth;return{vh:n,vw:i,vmax:Math.max(i,n),vmin:Math.min(i,n)}}function d(n){var i=0,e=function(){i--,i||n()};C.call(document.styleSheets,function(n){n.href&&v(n.href)!==v(location.href)&&(i++,g(n.ownerNode,e))}),i||n()}function v(n){return n.slice(0,n.indexOf("/",n.indexOf("://")+3))}function g(n,i){f(n.href,function(){var e=document.createElement("style");e.media=n.media,e.setAttribute("data-href",n.href),e.textContent=this.responseText,n.parentNode.replaceChild(e,n),i()},i)}function f(n,i,e){var t=new XMLHttpRequest;if("withCredentials"in t)t.open("GET",n,!0);else{if("undefined"==typeof XDomainRequest)throw new Error("cross-domain XHR not supported");t=new XDomainRequest,t.open("GET",n)}return t.onload=i,t.onerror=e,t.send(),t}var h,p,m,w,y=!1,k=window.navigator.userAgent,$=/([+-]?[0-9.]+)(vh|vw|vmin|vmax)/g,C=[].forEach,P=!1,x=k.indexOf("Opera Mini")>-1,b=/(iPhone|iPod|iPad).+AppleWebKit/i.test(k)&&function(){var n=k.match(/OS (\d)/);return n&&n.length>1&&parseInt(n[1])<8}(),T=function(){var n=k.indexOf(" Android ")>-1;if(!n)return!1;var i=k.indexOf("Version/")>-1;if(!i)return!1;var e=parseFloat((k.match("Android ([0-9.]+)")||[])[1]);return 4.4>=e}();return P||(P=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./)),{version:"0.5.1",findProperties:a,getCss:s,init:e,refresh:o}}),window.vikings={};var currentlyPlaying=null,currentlyPlayingPb=null;$(function(){$(".audioPlayer__playPause").click(function(){var n=$(this).closest(".audioPlayer"),i=n.find("audio")[0],e=!i.paused;e?(i.pause(),vikings.analytics.audioEvent("audio-pause",i.currentSrc)):(currentlyPlaying&&!currentlyPlaying.paused&&currentlyPlaying.pause(),i.play(),currentlyPlaying=i,currentlyPlayingPb=n.find(".audioPlayer__progressBar__progress"),n.addClass("playing"),requestAnimationFrame(updateProgressBar))}),$(".audioPlayer audio").on("pause",function(){$(this).closest(".audioPlayer").removeClass("playing")}),$(".audioPlayer audio").on("play",function(){vikings.analytics.audioEvent("audio-play",this.currentSrc)}),$(".audioPlayer audio").on("ended",function(){vikings.analytics.audioEvent("audio-listen-100%",this.currentSrc)}),$(".audioPlayer audio").on("timeupdate",function(){var n=$(this);this.currentTime>this.duration/2&&!n.data("half-played")&&($(this).data("half-played",!0),vikings.analytics.audioEvent("audio-listen-50%",this.currentSrc))})}),$(function(){$(document).on("click",".tray a",function(){vikings.analytics.trayClick(this)})}),$(function(){$(".tray").on("transitionend",function(n){n.target.style.overflowY="hidden",setTimeout(function(){n.target.style.overflowY="auto"})})}),$(function(){var n,i,e,t,o,a,r=$(".filmstrip"),s=r.height(),c=$(".logoHeader").height(),l=14,u=0,d=function(){n=r.offset().top,i=$(window).height(),e=$(document).height(),t=n+s-i-20,o=Math.min(n-c,e-i)-10,a=(o-t)/(l-1)};$(window).resize(d),$(window).load(d);var v=function(){if(!(t>n&&0==u)){var n=$(document).scrollTop(),i=Math.min(Math.max(Math.round((n-t)/a),0),l-1);i!=u&&(u=i,r.css("background-position-y",s*i*-1))}};vikings.onScroll(function(){requestAnimationFrame(v)})}),window.vikings.analytics={},window.vikings.analytics.buyTicketsButtonClick=function(n,i){var e=$(n).attr("href");window.vikings.analytics.event("ticketing","ticketing-exhibition-microsite-"+i,e)},window.vikings.analytics.scrollDownButtonClick=function(){window.vikings.analytics.event("one-page","scroll-down-button-click")},window.vikings.analytics.sponsorLogoClick=function(n){window.vikings.analytics.event("one-page","logo-click",n)},window.vikings.analytics.headerNavClick=function(n){var i=$(n).text();window.vikings.analytics.event("one-page","header-nav-click",i)},window.vikings.analytics.jumpNavClick=function(n){var i=$.trim($(n).text());window.vikings.analytics.event("one-page","jump-nav-click",i)},window.vikings.analytics.visitClick=function(n){var i=$.trim($(n).text());window.vikings.analytics.event("one-page","visit-click",i)},window.vikings.analytics.trayClick=function(n,i){var e=i||$.trim($(n).text());window.vikings.analytics.event("one-page","tray-click",e)},window.vikings.analytics.introFMLogoClick=function(){window.vikings.analytics.event("one-page","intro-fm-logo-click")},window.vikings.analytics.audioEvent=function(n,i){window.vikings.analytics.event("one-page",n,i)},window.vikings.analytics.event=function(n,i,e,t){ga("send","event",n,i,e,t?{nonInteraction:1}:null)},function(){function n(n){i.push(n)}var i=[];window.vikings.onScroll=n,window.vikings.sectionFrontMargin=function(n){return"believers"==n.attr("id")?-1*$(window).height()/2:"world"==n.attr("id")?0:100},$(function(){var n=$(document),e=n.scrollTop();$(document).scroll(function(){var t=n.scrollTop(),o=t>e;for(var a in i)i[a](o,t,e);e=t})})}(),function(){var n=[];window.vikings.onHashChange=function(i){n.push(i)},window.vikings.changeHash=function(i,e){i=i||window.location.hash.substring(1);for(var t in n)n[t](i,e)}}();var hasBeenToAnySectionBesidesIntro=!1;$(function(){function n(n){var e=i[0];for(var t in i){if(t>n)return e;e=i[t]}return e}var i={},e=function(){i={},$(".slide").each(function(){var n=$(this),e=$(this).offset();i[Math.max(e.top-vikings.sectionFrontMargin(n),0)]=this.id})};$(window).resize(e),e();var t=document.location.hash.substring(1),o=function(i,e){e=e||$(document).scrollTop();var o=n(e);t!=o&&(t=o,hasBeenToAnySectionBesidesIntro=hasBeenToAnySectionBesidesIntro||"introduction"!=t,!vikings.suspendScrollEvents&&hasBeenToAnySectionBesidesIntro&&vikings.analytics.event("one-page","section-scroll-enter",t,!0),vikings.changeHash(o))};vikings.onScroll(o)}),$(function(){$(".jumpNav__link, .button--excited").click(function(){vikings.suspendScrollEvents=!0;var n=$(this.hash),i=this.hash.substring(1);if(n.length){var e=vikings.sectionFrontMargin(n)-1;return $("html,body").animate({scrollTop:n.offset().top-e},{duration:500,easing:"easeInOutExpo",complete:function(){vikings.suspendScrollEvents=!1}}),vikings.changeHash(i,!0),!1}})}),function(){vikings.onHashChange(function(n){var i=$(".js--jumpNav__link--"+n);i.length&&($(".jumpNav__link--selected").removeClass("jumpNav__link--selected"),i.addClass("jumpNav__link--selected"))}),vikings.onHashChange(function(n){"introduction"==n?$(".logoHeader").hide():$(".logoHeader").show()}),vikings.onHashChange(function(n){"traders-craftspeople"==n||"voyagers"==n||"believers"==n||"visit"==n?$(".map").hide():$(".map").show()})}(),$(function(){var n,i,e,t,o,a=$(".map img"),r=$(".map"),s=$(".slide--farmers"),c=$(".slide--world"),l=[0,8,19],u=[40,166,225],d=[109,207,246],v=function(){n=$(window).height(),e=c.offset().top,i=e-n,o=s.offset().top,t=o-n};$(window).resize(v),$(window).load(v);var g=null,f=function(n){return i>n||n>o?0:n>e&&t>n?1:t>n?(n-i)/(e-i):(n-t)/(o-t)-1},h=function(n,i,e,t){var o,a,r;if(0==t?r=n:1==t?r=i:t>0?(o=i,a=n):0>t&&(o=i,a=e),!r){var r=[];for(var s in o)r.push(Math.round(interpolate(Math.abs(t),1,0,o[s],a[s])))}return"rgb("+r.join(",")+")"},p=function(){var n=$(document).scrollTop(),i=f(n);i&&g!=i&&(g=i,a.css("opacity",Math.abs(i)),r.css("background",h(l,u,d,i).toString()))};vikings.onScroll(function(){requestAnimationFrame(p)})}),$(function(){var n,i,e,t,o,a,r=$(".aurora"),s=$(".filmstrip"),c=$(".slide--voyagers"),l=$(".whoTheyWere--believers"),u=$(".shipProws"),d=function(){n=$(window).height(),i=$(document).height(),e=u.offset().top+u.outerHeight(),t=c.offset().top+c.height(),o=l.offset().top-n/2,a=s.offset().top-n};$(window).resize(d),$(window).load(d);var v=null,g=function(n){return e>n||n>a?0:n>t&&o>n?1:o>n?(n-e)/(t-e):1-(n-o)/(a-o)},f=function(){var n=$(document).scrollTop(),i=g(n);v!=i&&(v=i,r.css("opacity",i))};vikings.onScroll(function(){requestAnimationFrame(f)})});var svgManifest=["images/field-logo-white.svg","images/vikings-logo.svg","images/drawer-icons.svg"];$(function(){for(var n in svgManifest)$.ajax({url:svgManifest[n],complete:function(n){$(".svgHideContainer").append(n.responseText)}})}),vikings.zoom={},vikings.zoom.toggle=function(n){var i=$(n?n:".zoom:not(.minimized)");$(".overlay").toggleClass("hidden"),i.toggleClass("minimized animating"),setTimeout(function(){i.removeClass("animating")},1e3);var e=i.hasClass("minimized"),t=i.find(".zoom__title").text();vikings.analytics.event("one-page",e?"modal-close":"modal-open",t)},vikings.zoom.nav=function(n,i,e){var t=$(n).parents(".zoom"),o=e?t.prev(".zoom"):t.next(".zoom");t.addClass("zoom__navigating"),o.addClass("zoom__navigating"),t.toggleClass("minimized"),o.toggleClass("minimized"),setTimeout(function(){t.removeClass("zoom__navigating"),o.removeClass("zoom__navigating")},100),i.stopPropagation();var a=t.find(".zoom__title").text();return vikings.analytics.event("one-page",e?"modal-back":"modal-next",a),!1},vikings.zoom.figureClick=function(n,i){$(n).parent(".minimized").length||i.stopPropagation()},viewportUnitsBuggyfill.init(),$(function(){$(window).on("hashchange",function(){console.log("blat!")})}),$(function(){$(document).scroll()}),$(window).resize(function(){$(document).scroll()});