"use strict";function interpolate(a,b,c,d,e){return d+(e-d)*((a-b)/(c-b))}function updateProgressBar(){currentlyPlaying&&currentlyPlayingPb&&(currentlyPlayingPb.css("width",100*currentlyPlaying.currentTime/currentlyPlaying.duration+"%"),currentlyPlaying.paused||requestAnimationFrame(updateProgressBar))}function trayOpen(a,b){$("body").addClass("trayOpen trayOpen--"+b),vikings.analytics.headerNavClick(a)}function trayClose(){$("body").removeClass("trayOpen"),vikings.analytics.trayClick(null,"tray-close"),setTimeout(function(){$("body").removeClass("trayOpen--visit trayOpen--educators trayOpen--programs")},500)}window.vikings={},window.vikings.analytics={},window.vikings.analytics.buyTicketsButtonClick=function(a,b){var c=$(a).attr("href");window.vikings.analytics.event("ticketing","ticketing-exhibition-microsite-"+b,c)},window.vikings.analytics.scrollDownButtonClick=function(){window.vikings.analytics.event("one-page","scroll-down-button-click")},window.vikings.analytics.headerNavClick=function(a){var b=$(a).text();window.vikings.analytics.event("one-page","header-nav-click",b)},window.vikings.analytics.jumpNavClick=function(a){var b=$.trim($(a).text());window.vikings.analytics.event("one-page","jump-nav-click",b)},window.vikings.analytics.visitClick=function(a){var b=$.trim($(a).text());window.vikings.analytics.event("one-page","visit-click",b)},window.vikings.analytics.trayClick=function(a,b){var c=b||$.trim($(a).text());window.vikings.analytics.event("one-page","tray-click",c)},window.vikings.analytics.introFMLogoClick=function(){window.vikings.analytics.event("one-page","intro-fm-logo-click")},window.vikings.analytics.audioEvent=function(a,b){window.vikings.analytics.event("one-page",a,b)},window.vikings.analytics.event=function(a,b,c){ga("send","event",a,b,c)},function(){function b(b){a.push(b)}var a=[];window.vikings.onScroll=b,window.vikings.sectionFrontMargin=function(a){return"believers"==a.attr("id")?-1*$(window).height()/2:"world"==a.attr("id")?0:100},$(function(){var b=$(document),c=b.scrollTop();$(document).scroll(function(){var d=b.scrollTop(),e=d>c;for(var f in a)a[f](e,d,c);c=d})})}(),function(){var a=[];window.vikings.onHashChange=function(b){a.push(b)},window.vikings.changeHash=function(b,c){b=b||window.location.hash.substring(1);for(var d in a)a[d](b,c)}}(),$(function(){function c(b){var c=a[0];for(var d in a){if(d>b)return c;c=a[d]}return c}var a={},b=function(){a={},$(".slide").each(function(){var b=$(this),c=$(this).offset();a[Math.max(c.top-vikings.sectionFrontMargin(b),0)]=this.id})};$(window).resize(b),b();var d=document.location.hash.substring(1),e=function(a,b){b=b||$(document).scrollTop();var f=c(b);d!=f&&(d=f,vikings.suspendScrollEvents||vikings.analytics.event("one-page","section-scroll-enter",d),vikings.changeHash(f))};vikings.onScroll(e)}),$(function(){$(window).on("hashchange",function(){console.log("blat!")})}),$(function(){$(".jumpNav__link, .button--excited").click(function(){vikings.suspendScrollEvents=!0;var a=$(this.hash),b=this.hash.substring(1);if(a.length){var c=vikings.sectionFrontMargin(a)-1;return $("html,body").animate({scrollTop:a.offset().top-c},{duration:500,easing:"easeInOutExpo",complete:function(){vikings.suspendScrollEvents=!1}}),vikings.changeHash(b,!0),!1}})}),function(){vikings.onHashChange(function(a){var b=$(".js--jumpNav__link--"+a);b.length&&($(".jumpNav__link--selected").removeClass("jumpNav__link--selected"),b.addClass("jumpNav__link--selected"))}),vikings.onHashChange(function(a){"introduction"==a?$(".logoHeader").hide():$(".logoHeader").show()}),vikings.onHashChange(function(a){"traders-craftspeople"==a||"voyagers"==a||"believers"==a||"visit"==a?$(".map").hide():$(".map").show()})}(),$(function(){var h,i,j,k,l,a=$(".map img"),b=$(".map"),c=$(".slide--farmers"),d=$(".slide--world"),e=[0,8,19],f=[40,166,225],g=[109,207,246],m=function(){h=$(window).height(),j=d.offset().top,i=j-h,l=c.offset().top,k=l-h};$(window).resize(m),$(window).load(m);var n=null,o=function(a){return i>a||a>l?0:a>j&&k>a?1:k>a?(a-i)/(j-i):(a-k)/(l-k)-1},p=function(a,b,c,d){var e,f,g;if(0==d?g=a:1==d?g=b:d>0?(e=b,f=a):0>d&&(e=b,f=c),!g){var g=[];for(var h in e)g.push(Math.round(interpolate(Math.abs(d),1,0,e[h],f[h])))}return"rgb("+g.join(",")+")"},q=function(){var c=$(document).scrollTop(),d=o(c);d&&n!=d&&(n=d,a.css("opacity",Math.abs(d)),b.css("background",p(e,f,g,d).toString()))};vikings.onScroll(function(){requestAnimationFrame(q)})}),$(function(){var f,g,h,i,j,k,a=$(".aurora"),b=$(".filmstrip"),c=$(".slide--voyagers"),d=$(".whoTheyWere--believers"),e=$(".shipProws"),l=function(){f=$(window).height(),g=$(document).height(),h=e.offset().top+e.outerHeight(),i=c.offset().top+c.height(),j=d.offset().top-f/2,k=b.offset().top-f};$(window).resize(l),$(window).load(l);var m=null,n=function(a){return h>a||a>k?0:a>i&&j>a?1:j>a?(a-h)/(i-h):1-(a-j)/(k-j)},o=function(){var b=$(document).scrollTop(),c=n(b);m!=c&&(m=c,a.css("opacity",c))};vikings.onScroll(function(){requestAnimationFrame(o)})}),$(function(){var f,g,h,i,j,k,a=$(".filmstrip"),b=a.height(),c=$(".logoHeader").height(),d=14,e=0,l=function(){f=a.offset().top,g=$(window).height(),h=$(document).height(),i=f+b-g-20,j=Math.min(f-c,h-g)-10,k=(j-i)/(d-1)};$(window).resize(l),$(window).load(l);var m=function(){if(!(i>c&&0==e)){var c=$(document).scrollTop(),f=Math.min(Math.max(Math.round((c-i)/k),0),d-1);f!=e&&(e=f,a.css("background-position-y",-1*b*f))}};vikings.onScroll(function(){requestAnimationFrame(m)})}),vikings.zoom={},vikings.zoom.toggle=function(a){var b=a?$(a):$(".zoom:not(.minimized)");$(".overlay").toggleClass("hidden"),b.toggleClass("minimized animating"),setTimeout(function(){b.removeClass("animating")},1e3);var c=b.hasClass("minimized"),d=b.find(".zoom__title").text();vikings.analytics.event("one-page",c?"modal-close":"modal-open",d)},vikings.zoom.nav=function(a,b,c){var d=$(a).parents(".zoom"),e=c?d.prev(".zoom"):d.next(".zoom");d.addClass("zoom__navigating"),e.addClass("zoom__navigating"),d.toggleClass("minimized"),e.toggleClass("minimized"),setTimeout(function(){d.removeClass("zoom__navigating"),e.removeClass("zoom__navigating")},100),b.stopPropagation();var f=d.find(".zoom__title").text();return vikings.analytics.event("one-page",c?"modal-back":"modal-next",f),!1},vikings.zoom.figureClick=function(a,b){$(a).parent(".minimized").length||b.stopPropagation()};var currentlyPlaying=null,currentlyPlayingPb=null;$(function(){$(".audioPlayer__playPause").click(function(){var a=$(this).closest(".audioPlayer"),b=a.find("audio")[0],c=!b.paused;c?(b.pause(),vikings.analytics.audioEvent("audio-pause",b.currentSrc)):(currentlyPlaying&&!currentlyPlaying.paused&&currentlyPlaying.pause(),b.play(),currentlyPlaying=b,currentlyPlayingPb=a.find(".audioPlayer__progressBar__progress"),a.addClass("playing"),requestAnimationFrame(updateProgressBar))}),$(".audioPlayer audio").on("pause",function(){$(this).closest(".audioPlayer").removeClass("playing")}),$(".audioPlayer audio").on("play",function(){vikings.analytics.audioEvent("audio-play",this.currentSrc)}),$(".audioPlayer audio").on("ended",function(){vikings.analytics.audioEvent("audio-listen-100%",this.currentSrc)}),$(".audioPlayer audio").on("timeupdate",function(){var a=$(this);this.currentTime>this.duration/2&&!a.data("half-played")&&($(this).data("half-played",!0),vikings.analytics.audioEvent("audio-listen-50%",this.currentSrc))})}),$(function(){$(document).on("click",".tray a",function(){vikings.analytics.trayClick(this)})});var svgManifest=["images/field-logo-white.svg","images/vikings-logo.svg","images/drawer-icons.svg"];$(function(){for(var a in svgManifest)$.ajax({url:svgManifest[a],complete:function(a){$(".svgHideContainer").append(a.responseText)}})}),$(function(){$(document).scroll()}),$(window).resize(function(){$(document).scroll()}),function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.viewportUnitsBuggyfill=b()}(this,function(){function m(a,b){var c;return function(){var d=this,e=arguments,f=function(){a.apply(d,e)};clearTimeout(c),c=setTimeout(f,b)}}function n(){try{return window.self!==window.top}catch(a){return!0}}function o(c){a||(c===!0&&(c={force:!0}),b=c||{},b.isMobileSafari=k,b.isBadStockAndroid=l,(b.force||k||i||l||j||b.hacks&&b.hacks.required(b))&&(b.hacks&&b.hacks.initialize(b),a=!0,h=document.createElement("style"),h.id="patched-viewport",document.head.appendChild(h),x(function(){var a=m(q,b.refreshDebounceWait||100);window.addEventListener("orientationchange",a,!0),window.addEventListener("pageshow",a,!0),(b.force||i||n())&&(window.addEventListener("resize",a,!0),b._listeningToResize=!0),b.hacks&&b.hacks.initializeEvents(b,q,a),q()})))}function p(){h.textContent=t(),h.parentNode.appendChild(h)}function q(){a&&(r(),setTimeout(function(){p()},1))}function r(){return g=[],e.call(document.styleSheets,function(a){"patched-viewport"!==a.ownerNode.id&&a.cssRules&&"ignore"!==a.ownerNode.getAttribute("data-viewport-units-buggyfill")&&(a.media&&a.media.mediaText&&window.matchMedia&&!window.matchMedia(a.media.mediaText).matches||e.call(a.cssRules,s))}),g}function s(a){if(7===a.type){var c;try{c=a.cssText}catch(f){return}return d.lastIndex=0,d.test(c)&&(g.push([a,null,c]),b.hacks&&b.hacks.findDeclarations(g,a,null,c)),void 0}if(!a.style){if(!a.cssRules)return;return e.call(a.cssRules,function(a){s(a)}),void 0}e.call(a.style,function(c){var e=a.style.getPropertyValue(c);d.lastIndex=0,d.test(e)&&(g.push([a,c,e]),b.hacks&&b.hacks.findDeclarations(g,a,c,e))})}function t(){f=w();var c,d,a=[],b=[];return g.forEach(function(e){var f=u.apply(null,e),g=f.selector.length?f.selector.join(" {\n")+" {\n":"",h=new Array(f.selector.length+1).join("\n}");return g&&g===c?(g&&!c&&(c=g,d=h),b.push(f.content),void 0):(b.length&&(a.push(c+b.join("\n")+d),b.length=0),g?(c=g,d=h,b.push(f.content)):(a.push(f.content),c=null,d=null),void 0)}),b.length&&a.push(c+b.join("\n")+d),j&&a.push("* { content: normal !important; }"),a.join("\n\n")}function u(a,c,e){var f,g=[];f=e.replace(d,v),b.hacks&&(f=b.hacks.overwriteDeclaration(a,c,f)),c&&(g.push(a.selectorText),f=c+": "+f+";");for(var h=a.parentRule;h;)g.unshift("@media "+h.media.mediaText),h=h.parentRule;return{selector:g,content:f}}function v(a,b,c){var d=f[c],e=parseFloat(b)/100;return e*d+"px"}function w(){var a=window.innerHeight,b=window.innerWidth;return{vh:a,vw:b,vmax:Math.max(b,a),vmin:Math.min(b,a)}}function x(a){var b=0,c=function(){b--,b||a()};e.call(document.styleSheets,function(a){a.href&&y(a.href)!==y(location.href)&&(b++,z(a.ownerNode,c))}),b||a()}function y(a){return a.slice(0,a.indexOf("/",a.indexOf("://")+3))}function z(a,b){A(a.href,function(){var c=document.createElement("style");c.media=a.media,c.setAttribute("data-href",a.href),c.textContent=this.responseText,a.parentNode.replaceChild(c,a),b()},b)}function A(a,b,c){var d=new XMLHttpRequest;if("withCredentials"in d)d.open("GET",a,!0);else{if("undefined"==typeof XDomainRequest)throw new Error("cross-domain XHR not supported");d=new XDomainRequest,d.open("GET",a)}return d.onload=b,d.onerror=c,d.send(),d}var b,f,g,h,a=!1,c=window.navigator.userAgent,d=/([+-]?[0-9.]+)(vh|vw|vmin|vmax)/g,e=[].forEach,i=!1,j=c.indexOf("Opera Mini")>-1,k=/(iPhone|iPod|iPad).+AppleWebKit/i.test(c)&&function(){var a=c.match(/OS (\d)/);return a&&a.length>1&&parseInt(a[1])<8}(),l=function(){var a=c.indexOf(" Android ")>-1;if(!a)return!1;var b=c.indexOf("Version/")>-1;if(!b)return!1;var d=parseFloat((c.match("Android ([0-9.]+)")||[])[1]);return 4.4>=d}();return i||(i=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./)),{version:"0.5.0",findProperties:r,getCss:t,init:o,refresh:q}}),viewportUnitsBuggyfill.init();