#!/usr/bin/env php
<?php

require_once __DIR__.'/../vendor/autoload.php';

call_user_func(function () {
    $c = new Pimple\Container();
    $c->register(new \Bangpound\Pimple\Provider\AsseticServiceProvider(), array(
        'assetic.read_from' => __DIR__ .'/../build/fieldmuseum-website/patternlab/source',
        'assetic.write_to' => __DIR__ .'/../docroot/profiles/fieldmuseum/themes/esquif',
        'assetic.filter.autoprefixer.bin' => '/usr/local/bin/autoprefixer',
        'assetic.filter.coffeescript.bin' => '/usr/local/bin/coffee'
      ));
    $c->register(new \Bangpound\Pimple\Provider\Filter\CompassFilterServiceProvider());
    $c->register(new FieldAsseticServiceProvider());

    $app = new \Symfony\Component\Console\Application('Assetic', '1.0');
    $app->add($c['assetic.dump.command']);
    $app->run();
});
